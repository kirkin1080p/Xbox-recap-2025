<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Xbox Recap 2026</title>
  <link rel="stylesheet" href="./style.css" />
  <!-- html2canvas for export -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" defer></script>
  <script src="./script.js" defer></script>
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="brandIcon">X</div>
      <div class="brandText">
        <div class="brandTitle">Xbox Recap 2026</div>
        <div class="brandSub">Tracked properly. No guesswork.</div>
      </div>
    </div>

    <div class="topActions">
      <a class="pillBtn" href="#" id="supportBtn">üç™ Support</a>
      <a class="pillBtn" href="#" id="openEmbedLink" target="_blank" rel="noreferrer">üß© Live Card</a>

      <!-- User area ALWAYS visible -->
      <div class="userArea" id="userArea">
        <div class="userAvatarWrap">
          <img id="userAvatar" class="avatarImg" alt="User gamerpic" />
          <div id="userAvatarFallback" class="avatarFallback" aria-hidden="true"></div>
        </div>

        <div class="userMeta">
          <div class="userTopRow">
            <div id="userName" class="userName">Not connected</div>
            <div id="userBadge" class="userBadge off">Not connected</div>
          </div>

          <div class="userSubRow">
            <span class="muted">Sign in to lock your profile</span>
          </div>
        </div>

        <button id="signoutBtn" class="signoutBtn hidden" type="button">Sign out</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="inputCard">
        <label class="label" for="gamertagInput">Gamertag</label>
        <div class="inputRow">
          <input id="gamertagInput" class="input" placeholder="Enter gamertag..." />
          <button id="generateBtn" class="btnPrimary" type="button">Generate</button>
        </div>
        <div class="tip muted">Tip: share the link after you generate. It will keep the gamertag in the URL.</div>
        <div id="status" class="status hidden"></div>

        <div id="signinPrompt" class="signinPrompt">
          <a id="signinBtn" class="btnSecondary" href="#">Connect Xbox</a>
          <div class="muted small">This links your account via OpenXBL so we can fetch your real Title History.</div>
        </div>
      </div>
    </section>

    <!-- Recap card -->
    <section id="gamerCardWrap" class="cardWrap hidden">
      <div id="gamerCard" class="card">
        <div class="cardTop">
          <div class="cardIdentity">
            <div class="pfpWrap">
              <img id="profilePic" class="pfpImg" alt="Gamerpic" />
              <div id="profilePicFallback" class="pfpFallback" aria-hidden="true"></div>
            </div>

            <div class="identityText">
              <div id="gtName" class="gtName">‚Äî</div>

              <!-- Live presence line -->
              <div id="nowPlaying" class="subline muted">‚Äî</div>

              <!-- Confirmed line -->
              <div id="presence" class="subline">‚Äî</div>
            </div>
          </div>

          <div class="cardPills">
            <div id="dataQualityPill" class="pill">Tracking</div>
            <div id="lastUpdatedPill" class="pill muted">Refreshed ‚Äî ‚Ä¢ Last confirmed play ‚Äî</div>
          </div>
        </div>

        <div class="grid">
          <div class="tile">
            <div class="tileLabel">Gamerscore</div>
            <div class="tileValue" id="gamerscore">‚Äî</div>
            <div class="tileSub muted" id="gamerscoreDelta">‚Äî</div>
          </div>

          <div class="tile">
            <div class="tileLabel">Days played</div>
            <div class="tileValue" id="daysPlayed">‚Äî</div>
            <div class="tileSub muted" id="playRange">‚Äî</div>
          </div>

          <div class="tile">
            <div class="tileLabel">Favourite</div>
            <div class="tileValue" id="favGame">‚Äî</div>
            <div class="tileSub muted" id="favGameSessions">‚Äî</div>
          </div>

          <div class="tile">
            <div class="tileLabel">Current streak</div>
            <div class="tileValue" id="currentStreak">‚Äî</div>
            <div class="tileSub muted" id="longestStreak">‚Äî</div>
          </div>

          <div class="tile">
            <div class="tileLabel">Longest break</div>
            <div class="tileValue" id="longestBreak">‚Äî</div>
            <div class="tileSub muted">days</div>
          </div>

          <div class="tile">
            <div class="tileLabel">Unique games</div>
            <div class="tileValue" id="uniqueGames">‚Äî</div>
            <div class="tileSub muted" id="oneHit">‚Äî</div>
          </div>

          <div class="tile">
            <div class="tileLabel">Peak day</div>
            <div class="tileValue" id="peakDay">‚Äî</div>
            <div class="tileSub muted" id="peakDaySub">‚Äî</div>
          </div>

          <div class="tile">
            <div class="tileLabel">Most active weekday</div>
            <div class="tileValue" id="activeWeekday">‚Äî</div>
            <div class="tileSub muted" id="activeWeekdaySub">‚Äî</div>
          </div>

          <div class="tile">
            <div class="tileLabel">Most active month</div>
            <div class="tileValue" id="activeMonth">‚Äî</div>
            <div class="tileSub muted" id="activeMonthSub">‚Äî</div>
          </div>
        </div>

        <div id="achievementBlock" class="achievement hidden">
          <div class="achLeft">
            <img id="achievementIcon" class="achievementIcon" alt="Achievement icon" />
          </div>
          <div class="achMid">
            <div id="achievementName" class="achName">‚Äî</div>
            <div id="achievementPercent" class="achPercent muted">‚Äî</div>
          </div>
          <div id="achievementContext" class="achRight muted">‚Äî</div>
        </div>

        <div class="trackingLine muted" id="trackingInfo">‚Äî</div>

        <div class="actions">
          <button id="exportBtn" class="btnSecondary" type="button">Export PNG</button>
          <button id="copyLinkBtn" class="btnSecondary" type="button">Copy link</button>
          <a id="openEmbedLink2" class="btnSecondary" href="#" target="_blank" rel="noreferrer">Open embed</a>
        </div>

        <div class="embedRow">
          <div class="embedCol">
            <div class="embedLabel">Embed link</div>
            <div class="embedInputRow">
              <input id="liveLink" class="input" readonly />
              <button id="copyLiveLinkBtn" class="btnSecondary" type="button">Copy</button>
            </div>
          </div>

          <div class="embedCol">
            <div class="embedLabel">BBCode</div>
            <div class="embedInputRow">
              <input id="bbcode" class="input" readonly />
              <button id="copyBbBtn" class="btnSecondary" type="button">Copy</button>
            </div>
          </div>
        </div>

        <div class="journal">
          <div class="journalTitle">Xbox Journal</div>
          <div id="blogEntries" class="blogEntries"></div>
        </div>
      </div>
    </section>
  </main>
</body>
</html>
